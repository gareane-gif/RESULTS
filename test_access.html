<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            direction: rtl;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        .status {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }
        
        .btn {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: #357abd;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #1e7e34;
        }
        
        .btn-danger {
            background: #dc3545;
        }
        
        .btn-danger:hover {
            background: #c82333;
        }
        
        .test-results {
            text-align: right;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .test-item {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        
        .test-pass {
            background: #d4edda;
            color: #155724;
        }
        
        .test-fail {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ù†Ø¸ÙˆÙ…Ø©</h1>
        
        <div id="status" class="status info">
            Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù†Ø¸Ø§Ù…...
        </div>
        
        <div id="testResults"></div>
        
        <div>
            <button onclick="testSystem()" class="btn">ğŸ” ÙØ­Øµ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
            <button onclick="testLocalStorage()" class="btn btn-success">ğŸ’¾ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ®Ø²ÙŠÙ†</button>
            <button onclick="clearData()" class="btn btn-danger">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            <button onclick="openMainSystem()" class="btn btn-success">ğŸš€ ÙØªØ­ Ø§Ù„Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>
    </div>

    <script>
        // Test system functionality
        function testSystem() {
            const statusDiv = document.getElementById('status');
            const resultsDiv = document.getElementById('testResults');
            
            statusDiv.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...';
            statusDiv.className = 'status info';
            
            let tests = [];
            
            // Test 1: Browser compatibility
            try {
                const userAgent = navigator.userAgent;
                tests.push({
                    name: 'ØªÙˆØ§ÙÙ‚ Ø§Ù„Ù…ØªØµÙØ­',
                    status: 'pass',
                    details: `Ø§Ù„Ù…ØªØµÙØ­: ${userAgent}`
                });
            } catch (error) {
                tests.push({
                    name: 'ØªÙˆØ§ÙÙ‚ Ø§Ù„Ù…ØªØµÙØ­',
                    status: 'fail',
                    details: error.message
                });
            }
            
            // Test 2: localStorage availability
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                tests.push({
                    name: 'localStorage',
                    status: 'pass',
                    details: 'ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­'
                });
            } catch (error) {
                tests.push({
                    name: 'localStorage',
                    status: 'fail',
                    details: error.message
                });
            }
            
            // Test 3: JavaScript functionality
            try {
                const testArray = [1, 2, 3];
                const testObject = { name: 'test' };
                JSON.stringify(testArray);
                JSON.parse(JSON.stringify(testObject));
                tests.push({
                    name: 'ÙˆØ¸Ø§Ø¦Ù JavaScript',
                    status: 'pass',
                    details: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ØªØ¹Ù…Ù„'
                });
            } catch (error) {
                tests.push({
                    name: 'ÙˆØ¸Ø§Ø¦Ù JavaScript',
                    status: 'fail',
                    details: error.message
                });
            }
            
            // Test 4: Check existing data
            try {
                const students = JSON.parse(localStorage.getItem('students') || '[]');
                const blocked = JSON.parse(localStorage.getItem('blockedStudents') || '[]');
                tests.push({
                    name: 'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø©',
                    status: 'pass',
                    details: `${students.length} Ø·Ø§Ù„Ø¨ØŒ ${blocked.length} Ù…Ø­Ø¬ÙˆØ¨`
                });
            } catch (error) {
                tests.push({
                    name: 'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø©',
                    status: 'fail',
                    details: error.message
                });
            }
            
            // Test 5: File access
            try {
                const currentUrl = window.location.href;
                tests.push({
                    name: 'Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù„Ù',
                    status: 'pass',
                    details: `Ø§Ù„Ù…Ø³Ø§Ø±: ${currentUrl}`
                });
            } catch (error) {
                tests.push({
                    name: 'Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù„Ù',
                    status: 'fail',
                    details: error.message
                });
            }
            
            // Display results
            let html = '<div class="test-results"><h3>ğŸ“‹ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙØ­Øµ:</h3>';
            
            tests.forEach(test => {
                const cssClass = test.status === 'pass' ? 'test-pass' : 'test-fail';
                const icon = test.status === 'pass' ? 'âœ…' : 'âŒ';
                html += `
                    <div class="test-item ${cssClass}">
                        <strong>${icon} ${test.name}:</strong> ${test.details}
                    </div>
                `;
            });
            
            html += '</div>';
            resultsDiv.innerHTML = html;
            
            // Update status
            const passedTests = tests.filter(t => t.status === 'pass').length;
            const totalTests = tests.length;
            
            if (passedTests === totalTests) {
                statusDiv.innerHTML = `âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª (${passedTests}/${totalTests})`;
                statusDiv.className = 'status success';
            } else {
                statusDiv.innerHTML = `âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙØ´Ù„Øª (${passedTests}/${totalTests})`;
                statusDiv.className = 'status error';
            }
        }
        
        // Test localStorage
        function testLocalStorage() {
            const statusDiv = document.getElementById('status');
            
            try {
                // Test write
                const testData = {
                    test: true,
                    timestamp: new Date().toISOString(),
                    random: Math.random()
                };
                
                localStorage.setItem('systemTest', JSON.stringify(testData));
                
                // Test read
                const readData = JSON.parse(localStorage.getItem('systemTest'));
                
                // Verify data
                if (readData && readData.test === true) {
                    statusDiv.innerHTML = 'âœ… localStorage ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ';
                    statusDiv.className = 'status success';
                    
                    // Clean up
                    localStorage.removeItem('systemTest');
                } else {
                    throw new Error('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø© Ù„Ø§ ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙƒØªÙˆØ¨Ø©');
                }
                
            } catch (error) {
                statusDiv.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ localStorage: ${error.message}`;
                statusDiv.className = 'status error';
            }
        }
        
        // Clear data
        function clearData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) {
                try {
                    localStorage.clear();
                    const statusDiv = document.getElementById('status');
                    statusDiv.innerHTML = 'âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­';
                    statusDiv.className = 'status success';
                } catch (error) {
                    const statusDiv = document.getElementById('status');
                    statusDiv.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}`;
                    statusDiv.className = 'status error';
                }
            }
        }
        
        // Open main system
        function openMainSystem() {
            try {
                // Try different file names
                const possibleFiles = [
                    'index.html',
                    'index_simple.html',
                    'index_working.html',
                    'index_complete.html',
                    'index_full.html'
                ];
                
                let opened = false;
                
                possibleFiles.forEach(file => {
                    if (!opened) {
                        try {
                            window.open(file, '_blank');
                            opened = true;
                        } catch (error) {
                            console.log(`Could not open ${file}:`, error);
                        }
                    }
                });
                
                const statusDiv = document.getElementById('status');
                if (opened) {
                    statusDiv.innerHTML = 'âœ… ØªÙ… ÙØªØ­ Ø§Ù„Ù…Ù†Ø¸ÙˆÙ…Ø© ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©';
                    statusDiv.className = 'status success';
                } else {
                    statusDiv.innerHTML = 'âŒ Ù„Ù… ÙŠØªÙ…ÙƒÙ† ÙØªØ­ Ø£ÙŠ Ù…Ù„Ù Ù„Ù„Ù…Ù†Ø¸ÙˆÙ…Ø©';
                    statusDiv.className = 'status error';
                }
                
            } catch (error) {
                const statusDiv = document.getElementById('status');
                statusDiv.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ ÙØªØ­ Ø§Ù„Ù…Ù†Ø¸ÙˆÙ…Ø©: ${error.message}`;
                statusDiv.className = 'status error';
            }
        }
        
        // Auto-test on load
        window.onload = function() {
            console.log('ğŸ”§ Test page loaded successfully');
            
            // Quick browser check
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = 'âœ… Ø§Ù„ØµÙØ­Ø© Ù…Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­ - Ø§Ø¶ØºØ· "ÙØ­Øµ Ø§Ù„Ù†Ø¸Ø§Ù…" Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„';
            statusDiv.className = 'status success';
        };
    </script>
</body>
</html>
